angular.module("bbsCtrl",["bbsCtrlWelcome","bbsCtrlPost","bbsCtrlTeam","bbsCtrlUser"]),angular.module("bbsCtrlPost",["ngRoute","bbsServiceRESTful"]),angular.module("bbsCtrlPost").config(["$routeProvider",function(a){a.when("/",{templateUrl:"tpl/post.html",controller:"homePostListCtrl"})}]),angular.module("bbsCtrlPost").controller("homePostListCtrl",["rfPost","$scope",function(a,b){a.list(function(a){b.postList=a.result})}]),angular.module("bbsCtrlPost").controller("pubPostCtrl",["$scope",function(a){a.fileUploadList=[],a.removeFileUpload=function(b){a.fileUploadList.splice(b,1)},$("#upload-file").uploadify({swf:"/resource/uploadify.swf",uploader:"/upload",multi:!1,buttonClass:"btn btn-default",width:100,height:33,buttonText:"上传附件",onUploadSuccess:function(){a.$apply(function(){a.fileUploadList.push({name:"dddd"})})}})}]),angular.module("bbsCtrlTeam",["ngRoute","bbsServiceRESTful"]),angular.module("bbsCtrlTeam").config(["$routeProvider",function(a){a.when("/team",{templateUrl:"tpl/team.html",controller:"homeTeamListCtrl"})}]),angular.module("bbsCtrlTeam").controller("homeTeamListCtrl",["rfTeam","$scope",function(a,b){a.list(function(a){b.teamList=a.result})}]),angular.module("bbsCtrlUser",["ngRoute","bbsServiceRESTful"]),angular.module("bbsCtrlUser").config(["$routeProvider",function(a){a.when("/userList",{templateUrl:"tpl/userList.html",controller:"homeUserListCtrl"}).when("/userEdit",{templateUrl:"tpl/userEdit.html",controller:"userEditCtrl"}).when("/userInfo",{templateUrl:"tpl/userInfo.html",controller:"userInfoCtrl"})}]),angular.module("bbsCtrlUser").controller("homeUserListCtrl",["rfUser","$scope",function(a,b){a.list(function(a){b.userList=a.result})}]),angular.module("bbsCtrlUser").controller("userEditCtrl",["$scope",function(a){a.userInfo={name:"刘顺顺",nickName:"liuss",sex:"woman",age:18,hobby:[1,3,4],allHobbies:[{value:"运动",id:1},{value:"阅读",id:2},{value:"看电视",id:3},{value:"旅游",id:4}],email:"liuss@visionet.com.cn",homePage:"http://liuss.com",introduction:"我是一个程序员",education:2,allEducations:[{value:"小学",id:1},{value:"初中",id:2},{value:"高中",id:3},{value:"本科",id:4},{value:"本科以上",id:5}],birthday:"09-09",allColors:[{value:"黑色",id:1},{value:"黄色",id:2},{value:"白色",id:3},{value:"蓝色",id:4}],skinColor:4,allProfessions:[{value:"医生",id:1},{value:"老师",id:2},{value:"工人",id:3},{value:"司机",id:4},{value:"厨师",id:5},{value:"演员",id:6}],profession:[1,4,3],allProvinces:[{value:"请选择"},{value:"上海",id:2},{value:"北京",id:3},{value:"河南",id:4},{value:"江西",id:5},{value:"四川",id:6}],province:4}}]),angular.module("bbsCtrlUser").controller("userInfoCtrl",["$scope",function(a){a.userInfo={name:"刘顺顺",nickName:"liuss",sex:"woman",age:18,hobby:[1,2],allHobbies:[{value:"运动",id:1},{value:"阅读",id:2},{value:"看电视",id:3},{value:"旅游",id:4}],email:"liuss@visionet.com.cn",homePage:"http://liuss.com",introduction:"我是一个程序员",education:2,allEducations:[{value:"小学",id:1},{value:"初中",id:2},{value:"高中",id:3},{value:"本科",id:4},{value:"本科以上",id:5}],birthday:"09-09",allColors:[{value:"黑色",id:1},{value:"黄色",id:2},{value:"白色",id:3},{value:"蓝色",id:4}],skinColor:4,allProfessions:[{value:"医生",id:1},{value:"老师",id:2},{value:"工人",id:3},{value:"司机",id:4},{value:"厨师",id:5},{value:"演员",id:6}],profession:[1,4,3],allProvinces:[{value:"请选择"},{value:"上海",id:2},{value:"北京",id:3},{value:"河南",id:4},{value:"江西",id:5},{value:"四川",id:6}],province:4}}]),angular.module("bbsCtrlWelcome",[]),angular.module("bbsCtrlWelcome").controller("welcomeLoginCtrl",["$scope","$http",function(a,b){a.login=function(){a.runValidate=!0,a.loginForm.$valid&&b.post("login_in",{name:a.name,pwd:a.pwd},{responseType:"json"}).success(function(b){1e3!=b.code?a.loginSign="用户名或密码错误!":window.location.href="/home"})}}]),angular.module("bbsDire",["bbsFilter"]),!function(a,b){"use strict";var c={"font-styles":function(a,b){var c=b&&b.size?" btn-"+b.size:"";return"<li class='dropdown'><a class='btn dropdown-toggle"+c+"' data-toggle='dropdown' href='#'>"+"<i class='icon-font'></i>&nbsp;<span class='current-font'>"+a.font_styles.normal+"</span>&nbsp;<b class='caret'></b>"+"</a>"+"<ul class='dropdown-menu'>"+"<li><a data-wysihtml5-command='formatBlock' data-wysihtml5-command-value='div' tabindex='-1'>"+a.font_styles.normal+"</a></li>"+"<li><a data-wysihtml5-command='formatBlock' data-wysihtml5-command-value='h1' tabindex='-1'>"+a.font_styles.h1+"</a></li>"+"<li><a data-wysihtml5-command='formatBlock' data-wysihtml5-command-value='h2' tabindex='-1'>"+a.font_styles.h2+"</a></li>"+"<li><a data-wysihtml5-command='formatBlock' data-wysihtml5-command-value='h3' tabindex='-1'>"+a.font_styles.h3+"</a></li>"+"<li><a data-wysihtml5-command='formatBlock' data-wysihtml5-command-value='h4'>"+a.font_styles.h4+"</a></li>"+"<li><a data-wysihtml5-command='formatBlock' data-wysihtml5-command-value='h5'>"+a.font_styles.h5+"</a></li>"+"<li><a data-wysihtml5-command='formatBlock' data-wysihtml5-command-value='h6'>"+a.font_styles.h6+"</a></li>"+"</ul>"+"</li>"},emphasis:function(a,b){var c=b&&b.size?" btn-"+b.size:"";return"<li><div class='btn-group'><a class='btn"+c+"' data-wysihtml5-command='bold' title='CTRL+B' tabindex='-1'>"+a.emphasis.bold+"</a>"+"<a class='btn"+c+"' data-wysihtml5-command='italic' title='CTRL+I' tabindex='-1'>"+a.emphasis.italic+"</a>"+"<a class='btn"+c+"' data-wysihtml5-command='underline' title='CTRL+U' tabindex='-1'>"+a.emphasis.underline+"</a>"+"</div>"+"</li>"},lists:function(a,b){var c=b&&b.size?" btn-"+b.size:"";return"<li><div class='btn-group'><a class='btn"+c+"' data-wysihtml5-command='insertUnorderedList' title='"+a.lists.unordered+"' tabindex='-1'><i class='glyphicon glyphicon-list'></i></a>"+"<a class='btn"+c+"' data-wysihtml5-command='insertOrderedList' title='"+a.lists.ordered+"' tabindex='-1'><i class='glyphicon glyphicon-th-list'></i></a>"+"<a class='btn"+c+"' data-wysihtml5-command='Outdent' title='"+a.lists.outdent+"' tabindex='-1'><i class='glyphicon glyphicon-indent-right'></i></a>"+"<a class='btn"+c+"' data-wysihtml5-command='Indent' title='"+a.lists.indent+"' tabindex='-1'><i class='glyphicon glyphicon-indent-left'></i></a>"+"</div>"+"</li>"},link:function(a,b){var c=b&&b.size?" btn-"+b.size:"";return"<li><div class='bootstrap-wysihtml5-insert-link-modal modal fade' style='display: none;'><div class='modal-dialog'><div class='modal-content'><div class='modal-header'><a class='close' data-dismiss='modal'>&times;</a><h3>"+a.link.insert+"</h3>"+"</div>"+"<div class='modal-body'>"+"<input value='http://' class='bootstrap-wysihtml5-insert-link-url form-control'>"+"<label class='checkbox'> <input type='checkbox' class='bootstrap-wysihtml5-insert-link-target' checked>"+a.link.target+"</label>"+"</div>"+"<div class='modal-footer'>"+"<a href='#' class='btn' data-dismiss='modal'>"+a.link.cancel+"</a>"+"<a href='#' class='btn btn-primary' data-dismiss='modal'>"+a.link.insert+"</a>"+"</div>"+"</div>"+"</div>"+"</div>"+"<a class='btn"+c+"' data-wysihtml5-command='createLink' title='"+a.link.insert+"' tabindex='-1'><i class='glyphicon glyphicon-link'></i></a>"+"</li>"},image:function(a,b){var c=b&&b.size?" btn-"+b.size:"";return"<li><a id='richTextImage' class='btn"+c+"' data-wysihtml5-command='insertImage' title='"+a.image.insert+"' tabindex='-1'></a>"+"</li>"},html:function(a,b){var c=b&&b.size?" btn-"+b.size:"";return"<li><div class='btn-group'><a class='btn"+c+"' data-wysihtml5-action='change_view' title='"+a.html.edit+"' tabindex='-1'><i class='icon-pencil'></i></a>"+"</div>"+"</li>"},color:function(a,b){var c=b&&b.size?" btn-"+b.size:"";return"<li class='dropdown'><a class='btn dropdown-toggle"+c+"' data-toggle='dropdown' href='#' tabindex='-1'>"+"<span class='current-color'>"+a.colours.black+"</span>&nbsp;<b class='caret'></b>"+"</a>"+"<ul class='dropdown-menu'>"+"<li><div class='wysihtml5-colors' data-wysihtml5-command-value='black'></div><a class='wysihtml5-colors-title' data-wysihtml5-command='foreColor' data-wysihtml5-command-value='black'>"+a.colours.black+"</a></li>"+"<li><div class='wysihtml5-colors' data-wysihtml5-command-value='silver'></div><a class='wysihtml5-colors-title' data-wysihtml5-command='foreColor' data-wysihtml5-command-value='silver'>"+a.colours.silver+"</a></li>"+"<li><div class='wysihtml5-colors' data-wysihtml5-command-value='gray'></div><a class='wysihtml5-colors-title' data-wysihtml5-command='foreColor' data-wysihtml5-command-value='gray'>"+a.colours.gray+"</a></li>"+"<li><div class='wysihtml5-colors' data-wysihtml5-command-value='maroon'></div><a class='wysihtml5-colors-title' data-wysihtml5-command='foreColor' data-wysihtml5-command-value='maroon'>"+a.colours.maroon+"</a></li>"+"<li><div class='wysihtml5-colors' data-wysihtml5-command-value='red'></div><a class='wysihtml5-colors-title' data-wysihtml5-command='foreColor' data-wysihtml5-command-value='red'>"+a.colours.red+"</a></li>"+"<li><div class='wysihtml5-colors' data-wysihtml5-command-value='purple'></div><a class='wysihtml5-colors-title' data-wysihtml5-command='foreColor' data-wysihtml5-command-value='purple'>"+a.colours.purple+"</a></li>"+"<li><div class='wysihtml5-colors' data-wysihtml5-command-value='green'></div><a class='wysihtml5-colors-title' data-wysihtml5-command='foreColor' data-wysihtml5-command-value='green'>"+a.colours.green+"</a></li>"+"<li><div class='wysihtml5-colors' data-wysihtml5-command-value='olive'></div><a class='wysihtml5-colors-title' data-wysihtml5-command='foreColor' data-wysihtml5-command-value='olive'>"+a.colours.olive+"</a></li>"+"<li><div class='wysihtml5-colors' data-wysihtml5-command-value='navy'></div><a class='wysihtml5-colors-title' data-wysihtml5-command='foreColor' data-wysihtml5-command-value='navy'>"+a.colours.navy+"</a></li>"+"<li><div class='wysihtml5-colors' data-wysihtml5-command-value='blue'></div><a class='wysihtml5-colors-title' data-wysihtml5-command='foreColor' data-wysihtml5-command-value='blue'>"+a.colours.blue+"</a></li>"+"<li><div class='wysihtml5-colors' data-wysihtml5-command-value='orange'></div><a class='wysihtml5-colors-title' data-wysihtml5-command='foreColor' data-wysihtml5-command-value='orange'>"+a.colours.orange+"</a></li>"+"</ul>"+"</li>"}},d=function(a,b,d){return c[a](b,d)},e=function(b,d){this.el=b;var e=d||g;for(var f in e.customTemplates)c[f]=e.customTemplates[f];this.toolbar=this.createToolbar(b,e),this.editor=this.createEditor(d),window.editor=this.editor,a("iframe.wysihtml5-sandbox").each(function(b,c){a(c.contentWindow).off("focus.wysihtml5").on({"focus.wysihtml5":function(){a("li.dropdown").removeClass("open")}})})};e.prototype={constructor:e,createEditor:function(c){c=c||{},c=a.extend(!0,{},c),c.toolbar=this.toolbar[0];var d=new b.Editor(this.el[0],c);if(c&&c.events)for(var e in c.events)d.on(e,c.events[e]);return d},createToolbar:function(b,c){var e=this,f=a("<ul/>",{"class":"wysihtml5-toolbar",style:"display:none"}),i=c.locale||g.locale||"en";for(var j in g){var k=!1;void 0!==c[j]?c[j]===!0&&(k=!0):k=g[j],k===!0&&(f.append(d(j,h[i],c)),"html"===j&&this.initHtml(f),"link"===j&&this.initInsertLink(f),"image"===j&&this.initInsertImage(f))}if(c.toolbar)for(j in c.toolbar)f.append(c.toolbar[j]);return f.find("a[data-wysihtml5-command='formatBlock']").click(function(b){var c=b.target||b.srcElement,d=a(c);e.toolbar.find(".current-font").text(d.html())}),f.find("a[data-wysihtml5-command='foreColor']").click(function(b){var c=b.target||b.srcElement,d=a(c);e.toolbar.find(".current-color").text(d.html())}),this.el.before(f),f},initHtml:function(a){var b="a[data-wysihtml5-action='change_view']";a.find(b).click(function(){a.find("a.btn").not(b).toggleClass("disabled")})},initInsertImage:function(){},initInsertLink:function(b){var c,d=this,e=b.find(".bootstrap-wysihtml5-insert-link-modal"),f=e.find(".bootstrap-wysihtml5-insert-link-url"),g=e.find(".bootstrap-wysihtml5-insert-link-target"),h=e.find("a.btn-primary"),i=f.val(),j=function(){var a=f.val();f.val(i),d.editor.currentView.element.focus(),c&&(d.editor.composer.selection.setBookmark(c),c=null);var b=g.prop("checked");d.editor.composer.commands.exec("createLink",{href:a,target:b?"_blank":"_self",rel:b?"nofollow":""})};f.keypress(function(a){13==a.which&&(j(),e.modal("hide"))}),h.click(j),e.on("shown",function(){f.focus()}),e.on("hide",function(){d.editor.currentView.element.focus()}),b.find("a[data-wysihtml5-command=createLink]").click(function(){var b=a(this).hasClass("wysihtml5-command-active");return b?!0:(d.editor.currentView.element.focus(!1),c=d.editor.composer.selection.getBookmark(),e.appendTo("body").modal("show"),e.on("click.dismiss.modal",'[data-dismiss="modal"]',function(a){a.stopPropagation()}),!1)})}};var f={resetDefaults:function(){a.fn.wysihtml5.defaultOptions=a.extend(!0,{},a.fn.wysihtml5.defaultOptionsCache)},bypassDefaults:function(b){return this.each(function(){var c=a(this);c.data("wysihtml5",new e(c,b))})},shallowExtend:function(b){var c=a.extend({},a.fn.wysihtml5.defaultOptions,b||{},a(this).data()),d=this;return f.bypassDefaults.apply(d,[c])},deepExtend:function(b){var c=a.extend(!0,{},a.fn.wysihtml5.defaultOptions,b||{}),d=this;return f.bypassDefaults.apply(d,[c])},init:function(a){var b=this;return f.shallowExtend.apply(b,[a])}};a.fn.wysihtml5=function(b){return f[b]?f[b].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof b&&b?(a.error("Method "+b+" does not exist on jQuery.wysihtml5"),void 0):f.init.apply(this,arguments)},a.fn.wysihtml5.Constructor=e;var g=a.fn.wysihtml5.defaultOptions={"font-styles":!0,color:!1,emphasis:!0,lists:!0,html:!1,link:!0,image:!0,events:{},parserRules:{classes:{"wysiwyg-color-silver":1,"wysiwyg-color-gray":1,"wysiwyg-color-white":1,"wysiwyg-color-maroon":1,"wysiwyg-color-red":1,"wysiwyg-color-purple":1,"wysiwyg-color-fuchsia":1,"wysiwyg-color-green":1,"wysiwyg-color-lime":1,"wysiwyg-color-olive":1,"wysiwyg-color-yellow":1,"wysiwyg-color-navy":1,"wysiwyg-color-blue":1,"wysiwyg-color-teal":1,"wysiwyg-color-aqua":1,"wysiwyg-color-orange":1},tags:{b:{},i:{},br:{},ol:{},ul:{},li:{},h1:{},h2:{},h3:{},h4:{},h5:{},h6:{},blockquote:{},u:1,img:{check_attributes:{width:"numbers",alt:"alt",src:"url",height:"numbers"}},a:{check_attributes:{href:"url",target:"alt",rel:"alt"}},span:1,div:1,code:1,pre:1}},stylesheets:["./lib/css/wysiwyg-color.css"],locale:"ch"};"undefined"==typeof a.fn.wysihtml5.defaultOptionsCache&&(a.fn.wysihtml5.defaultOptionsCache=a.extend(!0,{},a.fn.wysihtml5.defaultOptions));var h=a.fn.wysihtml5.locale={en:{font_styles:{normal:"Normal text",h1:"Heading 1",h2:"Heading 2",h3:"Heading 3",h4:"Heading 4",h5:"Heading 5",h6:"Heading 6"},emphasis:{bold:"Bold",italic:"Italic",underline:"Underline"},lists:{unordered:"Unordered list",ordered:"Ordered list",outdent:"Outdent",indent:"Indent"},link:{insert:"Insert link",cancel:"Cancel",target:"Open link in new window"},image:{insert:"Insert image",cancel:"Cancel"},html:{edit:"Edit HTML"},colours:{black:"Black",silver:"Silver",gray:"Grey",maroon:"Maroon",red:"Red",purple:"Purple",green:"Green",olive:"Olive",navy:"Navy",blue:"Blue",orange:"Orange"}},ch:{font_styles:{normal:"正文",h1:"标题 1",h2:"标题 2",h3:"标题 3",h4:"标题 4",h5:"标题 5",h6:"标题 6"},emphasis:{bold:"B",italic:"I",underline:"U"},lists:{unordered:"无序",ordered:"有序",outdent:"取消引用",indent:"添加引用"},link:{insert:"插入链接",cancel:"取消",target:"在新窗口打开"},image:{insert:"Insert image",cancel:"Cancel"},html:{edit:"Edit HTML"},colours:{black:"黑色",silver:"银灰色",gray:"灰色",maroon:"赤红色",red:"红色",purple:"紫色",green:"绿色",olive:"橄榄色",navy:"深蓝色",blue:"蓝色",orange:"橙色"}}}}(window.jQuery,window.wysihtml5),angular.module("bbsDire").directive("richTextDire",[function(){return{link:function(a,b){$(b[0]).wysihtml5({color:!0,size:"default",stylesheets:["/css/bbs_0.0.0.css"]});var c;$(b[0]).prev().attr("id","richTextImageQueueID"),$(b[0]).prev().find("a[data-wysihtml5-command=insertImage]").uploadify({swf:"/resource/uploadify.swf",uploader:"/upload",multi:!1,buttonClass:"glyphicon glyphicon-picture btn btn-default",width:40,height:33,queueID:"richTextImageQueueID",buttonText:" ",onDialogOpen:function(){$(b).data("wysihtml5").editor.currentView.element.focus(!1),c=$(b).data("wysihtml5").editor.composer.selection.getBookmark()},onDialogClose:function(){$(b).data("wysihtml5").editor.currentView.element.focus()},onUploadSuccess:function(a,d){d=JSON.parse(d),$(b).data("wysihtml5").editor.currentView.element.focus(),c&&($(b).data("wysihtml5").editor.composer.selection.setBookmark(c),c=null),$(b).data("wysihtml5").editor.composer.commands.exec("insertImage",d.url)}})}}}]),angular.module("bbsDire").directive("timeDire",["$filter","$timeout",function(a,b){function c(d,e){d.text(a("timeFilter")(e.value)),b(function(){c(d,e)},6e4)}return function(a,b,d){c(b,d)}}]),angular.module("bbsDire").directive("warnDire",["$timeout",function(){return{restrict:"E",template:'<div class="alert warn-dire" ></div>',replace:!0,controller:function(){console.log("sdf")},link:function(a,b){var c=3e3;a.warnShow=function(a){a&&a.text&&(angular.isNumber(a.timeout)&&(c=a.timeout),b.text(a.text),b.addClass("alert-"+(a.sign?a.sign:"warning")),b.show(),window.setTimeout(function(){b.hide()},c))}}}}]),angular.module("bbsFilter",[]),angular.module("bbsFilter").filter("dataRender",[function(){return function(a,b,c,d){var e="value",f="id";angular.isArray(b)&&(d=b,b=e,c=f);for(var g="",h=0;h<d.length;h++)if(angular.isArray(a))for(var i=0;i<a.length;i++)d[h][c]==a[i]&&(g+=","+d[h][b]);else if(d[h][c]==a)return d[h][b];return g.length?g.substr(1):""}}]),angular.module("bbsFilter").filter("timeFilter",["$filter",function(a){var b=a("date");return function(a){var c,d=(new Date).getTime(),e=d-a;return c=(e=parseInt(e/1e3))<60?e+"秒前":(e=parseInt(e/60))<60?e+"分钟前":(e=parseInt(e/60))<24?e+"小时前":(e=parseInt(e/24))<30?e+"天前":b(a,"yyyy-MM-dd HH:mm:ss")}}]),angular.module("bbs",["bbsCtrl","bbsFilter","bbsService","bbsDire","ui.bootstrap","angular.patch"]),Holder.run({themes:{simple:{background:"#66FFCC",foreground:"#000",size:12}},images:"#new"}),angular.module("bbsServiceRESTful",["ngResource"]),angular.module("bbsServiceRESTful").factory("rfPost",["$resource",function(a){var b="/api/post/:postId",c={list:{method:"get"}},d=a(b,{},c);return d}]),angular.module("bbsServiceRESTful").factory("rfTeam",["$resource",function(a){var b="/api/team/:teamId",c={list:{method:"get"}},d=a(b,{},c);return d}]),angular.module("bbsServiceRESTful").factory("rfUser",["$resource",function(a){var b="/api/user/:userId",c={list:{method:"get"}},d=a(b,{},c);return d}]),angular.module("bbsService",["bbsServiceRESTful"]);